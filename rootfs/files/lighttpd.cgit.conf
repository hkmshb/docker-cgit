# {{{ includes
include "lighttpd.conf"
# }}}

# {{{ override server settings
server.errorlog-use-syslog = "enable"
# }}}


# {{{ cgit configuration
server.modules += ("mod_cgi", "mod_rewrite")

$SERVER["socket"] == ":80" {
  # ssl.engine                    = "enable"
  # ssl.pemfile                   = "/etc/lighttpd/ssl/git.example.com.pem"

  server.name          = "localhost"
  server.document-root = "/usr/share/webapps/cgit/"

  index-file.names     = ( "cgit.cgi" )
  cgi.assign           = ( "cgit.cgi" => "" )
  mimetype.assign      = ( ".css" => "text/css" )
  url.rewrite-once     = (
    "^/cgit/cgit.css"  => "/cgit.css",
    "^/cgit/cgit.png"  => "/cgit.png",
    "^/([^?/]+/[^?]*)?(?:\?(.*))?$"   => "/cgit.cgi?url=$1&$2",
  )
}

# }}}

